# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.


tasks:
  - init: npm install
    command: npm run start

  - name: Install Android SDK
    command: |
        # Instalar Android SDK y herramientas necesarias
        wget -q https://dl.google.com/android/repository/commandlinetools-linux-7583922_latest.zip -O android-sdk.zip
        unzip -q android-sdk.zip -d android-sdk
        export ANDROID_HOME=$PWD/android-sdk
        yes | $ANDROID_HOME/cmdline-tools/tools/bin/sdkmanager --licenses
        $ANDROID_HOME/cmdline-tools/tools/bin/sdkmanager "platform-tools" "platforms;android-30" "emulator"
  - name: Create AVD
    command: |
      # Crear un AVD (Android Virtual Device)
      echo "no" | $ANDROID_HOME/cmdline-tools/tools/bin/avdmanager --verbose create avd --force --name "gitpod-emulator" --package "system-images;android-30;google_apis;x86"

ports:
  - port: 6080
    onOpen: open-preview



